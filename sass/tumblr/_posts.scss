.post {
	// force the article to contain the margins of its content http://reference.sitepoint.com/css/collapsingmargins
	overflow: hidden;

	margin-top: rhythm(2);
	margin-bottom: rhythm(2);

	@include googie($post-body-background);

	&:first-child {
		margin-top: 0;
	}

	&:last-of-type {
		margin-bottom: 0;
		border-bottom: 0;
	}

	header, .post-body, figure, ul.conversation {
		@include rhythm(1, 0, 0, 1);
		margin-left: 1em;
		margin-right: 1em;
	}

	header h1 {
		@include header-font(40px);
	}

	.post-body {
		> * {
			@include rhythm(1, 0, 0, 1);
		}

		ul {
			padding-left: $large-gutter;
		}

		li {
			@include colored-bullets($border-color);
		}

		blockquote {
			margin-left: 0;
			border-left: 3px solid $border-color;
			padding-left: $large-gutter - 3px;
		}
	}

	figcaption {
		@include rhythm(1, 0, 0, 1);
	}
}

.post .photo {
	background-color: white;
	@include rhythm(1, 1, 1, 1);
	padding-left: rhythm(1);
	padding-right: rhythm(1);
	@include box-shadow(0 1px 3px rgba(0, 0, 0, 0.25));
	@include border-radius(2px);
	@include transform(rotate(-1deg));
	@include backface-visibility(hidden);

	img {
		max-width: 100%;
	}
}

.quote {
	blockquote {
		font-family: $accent-font;
		@include adjust-font-size-to(32px);
		@include adjust-leading-to(2/3);
		@include rhythm(1, 0, 0, 1, 32px);
		margin-left: 0;
		margin-right: 0;
		padding-left: 2.5em;
		border-left: 0;
		position: relative;

		&:before {
			content: '\201c';
			font-family: $base-font;
			color: $border-color;
			font-size: 5em;
			line-height: 0.75;
			position: absolute;
			top: 0;
			left: 0;
		}
	}

	figcaption:before {
		content: '\2014\a0';
	}
}

@mixin border-arrow($tail-width: 9px, $arrowhead-size: 35px, $inactive-color: $border-color, $active-color: $link-highlight-border) {
	position: relative;
	display: block;
	margin-right: $arrowhead-size;
	border-bottom-width: $tail-width;
	border-bottom-style: dotted;

	&:after {
		content: '';

		width: 0;
		height: 0;

		position: absolute;
		right: ($arrowhead-size * -1) + ($tail-width / 2);
		bottom: (($tail-width / 2) + ($arrowhead-size / 2)) * -1;

		border: $arrowhead-size / 2 solid transparent;
		border-left-color: $inactive-color;

		@include single-transition(all, 0.1s, linear, 0);
	}

	&:hover, &:active, &:focus {
		border-bottom-width: $tail-width;

		&:after {
			border-left-color: $active-color;
		}
	}
}

.link {
	h1 {
		@include header-font(32px);

		a, a:visited {
			@include border-arrow;
		}
	}
}

ul.conversation {
	list-style: none;
	padding: 0;
}
