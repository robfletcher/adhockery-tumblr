@content-width: 660px;
@content-gutter: 16px;

@background-color: #f9f9f6;
@text-color: #444;
@muted-color: #999;
@divider-color: #ccc;
@heading-color: #444755;
@border-color: #08c;
@active-link-color: #bf1a00;
@banner-color: white;
@banner-shadow-1: #5c5f72;
@banner-shadow-2: #a4c2d9;
@splash-color: #d2e1eC;

@base-font: 'Century Gothic', CenturyGothic, AppleGothic, sans-serif;
@heading-font: 'Galindo', cursive;
@accent-font: 'Kaushan Script', cursive;
@monospace-font: 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', Monaco, 'Courier New', Courier, monospace;

@break-tablet: 480px;
@break-desktop: 1024px;

@import "h5bp-base";
@import "css3-mixins";

// Stylistic mixins
// ----------------------------------------
.content {
  width: 80%;
  max-width: @content-width + (2 * @content-gutter);
  margin: 0 auto;

  @media only screen and (min-width: @break-tablet) {
    width: 100%;
    padding-left: @content-gutter;
    padding-right: @content-gutter;
  }
}

.centered-up-to(@breakpoint, @then-align: left) {
  text-align: center;
  @media only screen and (min-width: @breakpoint) {
    text-align: @then-align;
  }
}

.googie {
  position: relative;

  &:before {
    content: "";
    background-color: @splash-color;
    position: absolute;
    z-index: -1;

    pointer-events: none; // stops 3d transforms blocking clicks in webkit

   .backface-visibility;

    // crazy fix for iOS browsers which will render horrible aliasing on skewed / rotated
    // elements without this
    padding: 2px;
    .background-clip(content-box);
  }
}

// Scaffolding
// ----------------------------------------

* {
  .box-sizing;
}

html, body {
  overflow-x: hidden; // prevents transformed elements overflowing page bounds - especially nasty on phones
}

body {
  font: 18px/1.5 @base-font;
  background-color: @background-color;
  color: @text-color;
  text-shadow: 0px 1px 0px white;
  text-shadow: 1px 1px 0px rgba(255,255,255,0.5);
}

blockquote {
  border-color: @banner-shadow-2;
}

// Vertical rhythm
// ----------------------------------------

h1 {
  margin: 0;
  font-size: 1.4444444444444444em;
  line-height: 1.0384615384615385em;
  margin-bottom: 1.0384615384615385em;
}
h2 {
  margin: 0;
  font-size: 1.3333333333333333em;
  line-height: 1.125em;
  margin-bottom: 1.125em;
}
h3 {
  margin: 0;
  font-size: 1.2222222222222223em;
  line-height: 1.2272727272727273em;
  margin-bottom: 1.2272727272727273em;
}
h4 {
  margin: 0;
  font-size: 1.1111111111111112em;
  line-height: 1.35em;
  margin-bottom: 1.35em;
}
p, ul, blockquote, pre, figcaption {
  margin: 0 0 1.5em 0;
  font-size: 1em;
  line-height: 1.5em;
}
.small {
  margin: 0 0 1.6875em 0;
  font-size: 0.8888888888888888em;
  line-height: 1.6875em;
}
// Headings/small
// ----------------------------------------

h1, h2, h3, h4, h5, h6 {
  font-family: @heading-font;
  font-weight: normal;
  text-rendering: optimizelegibility;
  -webkit-font-smoothing: antialiased;
  color: @heading-color;
}

// Preformatted text and code
// ----------------------------------------

// allow pre blocks to scroll
pre {
  white-space: pre;
  word-wrap: normal;
  overflow-x: auto;
}

pre, code, kbd, samp {
  font: 1em/1.5 @monospace-font;
}

// Links
// ----------------------------------------

a, a:visited {
  text-decoration: none;
  color: inherit;
  border-bottom: 1px solid #aaa;
  .transition(all linear 0.1s);

  &:hover {
    color: #000;
    border-bottom: 3px solid @active-link-color;
  }
}

a[rel~=tag]:before {
  content: '#';
}

a[rel~=external]:after {
  content: '\00a0\21D2';
}

// Primary styles
// ----------------------------------------

.avatar {
  background-size: 64px 64px;
  width: 64px;
  height: 64px;
  .border-radius(64px);
  border: 1px solid #eee;
  .inner-shadow(0, 1px, 3px, 0.3);
  display: block;
  margin: 1em auto 1.2em;

  @media only screen and (min-width: @break-tablet) {
    background-size: 128px 128px;
    width: 128px;
    height: 128px;
    .border-radius(128px);
    margin: 1em auto 2em;
    border-width: 0 0 1px 0;
    border-color: rgba(255,255,255,0.8);
  }

  @media only screen and (min-width: @break-desktop) {
    position: absolute;
    top: 0.75em;
    right: 0;
    margin: 0;
  }
}

.strapline {
  font-variant: small-caps;
}

time {
  color: @muted-color;
}

ul.tags {
  padding: 0;

  li {
    list-style: none;
    display: inline-block;
    margin-right: 0.25em;

    a {
      color: @muted-color;
    }
  }
}

.banner {
  .googie;
  width: 100%;
  padding: 0;
  margin: 0;

  &:before {
    background-image: url(http://static.tumblr.com/x4ukvcb/1Upmhffhy/bg.png);
    background-color: @active-link-color;
    height: 150%;
    width: 120%;
    top: -12%;
    left: -10%;
    .transform(skew(3deg) rotate(-1deg) translate(0, 1.5em));

    @media only screen and (min-width: 961px) {
      background-size: cover;
    }
  }
}

#main-nav {
  .content;
  .centered-up-to(@break-desktop, right);

  margin-top: 1.5em;
  margin-bottom: 1.5em;
  font-family: @accent-font;

  a {
    margin: 0 0.65em;
    font-size: 1.2em;
    color: @banner-color;
    text-shadow: 1px 1px 0px @banner-shadow-1;

    &:hover {
      border-color: @banner-shadow-2;
    }

    @media only screen and (min-width: @break-tablet) {
      font-size: 1.5em;
    }
  }
}

#site-header {
  .content;
  .centered-up-to(@break-desktop);

  color: @banner-color;
  text-shadow: 1px 1px 0px @banner-shadow-1;

  @media only screen and (min-width: @break-desktop) {
    position: relative;
    padding-bottom: 1em;
  }

  h1 {
    letter-spacing: -1px;
    font-size: 48px;
    line-height: 1.2;
    margin-bottom: 0;
    text-transform: lowercase;
    text-shadow: 3px 3px 0px @banner-shadow-1;
    text-shadow: 3px 3px 0px @banner-shadow-2, 7px 7px 0px @banner-shadow-1;

    @media only screen and (min-width: @break-tablet) {
      font-size: 62px;
    }

    @media only screen and (min-width: @break-desktop) {
      font-size: 72px;
    }

    a {
      color: @banner-color;
      border: 0;
      &:hover {
        color: @banner-color;
      }
    }
  }

  @media only screen and (min-width: @break-desktop) {
    h1, .strapline {
      margin-right: 128px;
    }
  }
}

#posts {
  .content;
  .googie;

  padding-top: 3em;

  &:before {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    .transform(skewY(-4deg) scaleX(1.4));

    @media only screen and (min-width: @break-tablet) {
      .transform(skew(-4deg, -2deg) scale(1.3, 1) rotate(-2deg));
    }
  }

  h1 a {
    color: @heading-color;
    border: 0;

    &:hover {
      color: @active-link-color;
    }
  }

  &.archive {
    padding-bottom: 5em;
  }
}

article {
  width: 100%;
  margin: 3em 0;
  padding: 0;
  border-bottom: 1px solid @divider-color;

  &:first-child {
    margin-top: 0;
  }

  &:last-child {
    border-bottom: 0;
  }

  footer {
    .small;
    margin-bottom: 3em;
  }

  time, .tags {
    display: block;
  }
}

.read_more {
  font-family: @accent-font;
  text-transform: lowercase;

  &:after {
    content: ' â€¦';
  }
}

.quote blockquote {
  font-family: @accent-font;
  margin: 0;
  font-size: 1.4444444444444444em;
  line-height: 1.0384615384615385em;
  margin-bottom: 1.0384615384615385em;

  display: block;
  padding: 0 2em;
  position: relative;

  &:before, &:after {
    position: absolute;
    top: 0;
    display: block;
    font-size: 2em;
    line-height: 1em;
    width: 1em;
    height: 100%;
  }

  &:before {
    content: '\201C';
    left: 0;
  }

  &:after {
    content: '\201D';
    right: 0;
  }
}

.photo {
  img {
    width: 100%;
  }

  figcaption {
    margin-top: 1.5em;
  }
}

.link a {
  display: inline-block;
  margin: 0;
  font-size: 1.4444444444444444em;
  line-height: 1.0384615384615385em;
  margin-bottom: 1.0384615384615385em;
  border-bottom: 0;

  &:hover, &:active {
    color: @active-link-color;
  }
}

// code samples
pre {
  .border-radius(0.5em);
  background: @text-color;
  color: white;
  text-shadow: none;
  -webkit-font-smoothing: antialiased;
  padding: 1.5em;
}

@import "vim-sunburst";

#site-footer {
  padding: 4em 0 8em;
  overflow: hidden;
  color: #717171;
  text-shadow: 0 -1px 0 #222;
  border-top: 1px solid #111;
  background: #333;

  @media only screen and (min-width: @break-tablet) {
    padding: 3em 0;
  }

  > * {
    .content;
  }
}

.pagination {
  margin: 3em 0;
  text-align: center;

  a {
    @size: 2em;
    display: inline-block;
    width: @size;
    height: @size;
    line-height: @size;
    .border-radius(@size / 2);
    margin-left: 1em;
    background-color: @text-color;
    color: white;
    text-shadow: none;
    border-bottom: none;

    &:first-child {
      margin-left: 0;
    }

    &:hover {
      background-color: @active-link-color;
    }

    &.current, &.current:hover {
      background-color: @divider-color;
      color: @muted-color;
      cursor: not-allowed;
    }
  }

}

#disqus_thread {
  margin-top: 1.5em;
}

@import "h5bp-mixins";
@import "h5bp-print";
